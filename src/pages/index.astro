---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog", ({ data }) => !data.draft)).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="Home" description="Portfolio and technical notes by Leo">
  <section class="hero">
    <p class="kicker">Security Engineer / Red Teamer</p>
    <h1 class="title">Welcome to this page</h1>
    <p class="desc">
      趣味や技術的なことを、このページに気ままに綴ります。
    </p>
    <div class="hero-actions">
      <a class="button primary" href="/blog">ブログポスト</a>
      <a class="button ghost" href="/about">プロフィール</a>
    </div>
  </section>

  <div class="grid">
    <section class="card list col-8">
      <h2>Latest posts</h2>
      {
        posts.length === 0 ? (
          <p class="meta">まだ記事がありません。</p>
        ) : (
          <ul>
            {posts.map((post) => (
              <li>
                <a class="post-link" href={`/blog/${post.id.replace(/\.md$/, "")}/`}>
                  <span>{post.data.title}</span>
                  <span class="post-arrow" aria-hidden="true">-&gt;</span>
                </a>
                <div class="meta">
                  {post.data.pubDate.toLocaleDateString("ja-JP")}
                  {" · "}
                  {post.data.description}
                </div>
              </li>
            ))}
          </ul>
        )
      }
    </section>

    <aside class="card note col-4">
      <h2>Now</h2>
      <p>
        最近はEDRの検知ロジックと回避の検証、テレメトリからの痕跡分析を中心に。<br>
		技術も筋肉も、少しずつ積み上げ中。目指せベンチ100kg💪
      </p>
      <h2>Links</h2>
      <ul class="linklist">
        <li>
          <a
            class="icon-link"
            href="https://x.com/Nyleon88"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="X (formerly Twitter)"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill="currentColor"
                d="M18.244 2h3.308l-7.226 8.26L22.82 22h-6.65l-5.2-6.8L4.98 22H1.67l7.73-8.835L1.254 2h6.82l4.7 6.23L18.244 2zm-1.161 18h1.833L7.084 3.89H5.117L17.083 20z"
              ></path>
            </svg>
            <span class="sr-only">X</span>
          </a>
        </li>
      </ul>
      <h2>Contact</h2>
      <p class="meta">Discord:Nyleon88#6315</p>
    </aside>
  </div>
</BaseLayout>
